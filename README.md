# Домашки по курсу ППО

## ДЗ 1. Assertions

Цель: получить практический опыт применения динамических проверок в коде (assertions).

Необходимо реализовать структуры данных `LRUCache` на хешмапе и двусвязном списке. При
реализации необходимо самостоятельно продумать возможные проверки pre/post-условий и
инвариантов класса. Придуманные проверки необходимо добавить в код реализации в виде
assertions. Класс необходимо покрыть тестами.

Указания:
* использовать `LinkedHashMap` напрямую нельзя

## ДЗ 2. Mock

[ДАННЫЕ УДАЛЕНЫ]

## ДЗ 3. Refactoring

Цель: получить практический опыт применения техник рефакторинга.

Скачайте приложение: https://github.com/akirakozov/software-design/tree/master/java/refactoring

Приложение представляет собой простой web-server, который хранит информацию о товарах и
их цене. Поддержаны такие методы:
* http://localhost:8081/get-products - посмотреть все товары в базе
* http://localhost:8081/add-product?name=iphone6&price=300 - добавить новый товар
* http://localhost:8081/query?command=sum - выполнить некоторый запрос с данными в
  базе

Необходимо отрефакторить этот код (логика методов не должна измениться), например:
* убрать дублирование
* выделить отдельный слой работы с БД
* выделить отдельный слой формирования html-ответа
* и тд
  
Указание:
* задание нужно сдавать через e-mail, в заголовке письма указать “[SD-TASK]”
* проект перенести к себе github.com
* сначала добавить тесты (отдельными комитами)
* каждый отдельный рефакторинг делать отдельным комитом
* без истории изменений и тестов баллы буду сниматься

## ДЗ 4. MVC

[ДАННЫЕ УДАЛЕНЫ]

## ДЗ 5. Bridge

[ДАННЫЕ УДАЛЕНЫ]

## ДЗ 6. Visitor & State

Цель: получить практический опыт применения паттернов поведения visitor и state.

Необходимо реализовать калькулятор, который умеет преобразовывать простые
арифметические выражения в обратную польскую запись (ОПЗ) и вычислять их. Пример
выражения:

```(23 + 10) * 5 – 3 * (32 + 5) * (10 – 4 * 5) + 8 / 2```

Выражение может содержать скобки, пробельные символы, цифры и 4 операции: `+`, `-`, `*`, `/`.
Для вычисления выражения его необходимо сначала разбить на токены:
* по одному токену на каждую скобку и операцию;
* токен для целых чисел.

Пример:
`(30 + 2) / 8` -> `LEFT NUMBER(30) PLUS NUMBER(2) RIGHT DIV NUMBER(8)`

Далее токены преобразуются к ОПЗ, которая уже не содержит скобок и может быть легко
вычислена с помощью стека.

`LEFT NUMBER(30) PLUS NUMBER(2) RIGHT DIV NUMBER(8)` ->
`NUMBER(30) NUMBER(2) PLUS NUMBER(8) DIV`

Схема работы калькулятора:

* входной набор данных разбирается на отдельные токены `Tokenizer`'ом;
* `ParserVisitor` обходит все полученные токены и преобразует их к обратной польской
записи;
* затем токены печатаются `PrintVisitor`'ом;
* значение выражения вычисляется `СalcVisitor`'ом.
* 
`Visitor`'ы могут использовать стеки и другие структуры данных, чтобы накапливать в себе
промежуточные результаты.

`Tokenizer` проще всего реализовать в виде конечного автомата, который считывает по одному
из символов из входного потока и преобразует их в токены. Сам автомат необходимо
реализовать, используя паттерн `State`.

Скелет классов:

```
interface Token {
    void accept(TokenVisitor visitor);
}
interface TokenVisitor {
    void visit(NumberToken token);
    void visit(Brace token);
    void visit(Operation token);
}
```

`NumberToken`, `Brace`, `Operation` реализуют `Token`.

Все `Visitor` реализуют `TokenVisitor`.

В итоге необходимо реализовать программу, которая с консоли считывает входное выражение
и выводит в консоль сначала выражение преобразованное в обратную польскую нотации, а
затем вычисленное значение выражения. Если было введено некорректное выражение,
необходимо вывести ошибку.

Подробнее про ОПЗ и преобразования в нее:

https://ru.wikipedia.org/wiki/Обратная_польская_запись

Указание:
* задание нужно сдавать через e-mail, в заголовке письма указать “[SD-TASK]”
* в письме указать ссылку на ваш код на github.com